# CREATING NODE PORT SERVICE

IAKO OVO NECU KORISTITI OFFTEN, TREBA CE MI ZA TESTIRANJE, ODNOSNO ZA DEVELOPMENT PURPOSES

JOS NE KREIRAM CLUSTER IP SERVICE, JER IMAM SAMO JEDAN POD U MOM CLUSTERU, TIME NE BI EXPOSE-OVAO POD TO THE OTHER PODS, JER DRUGIH POD-OVA NEMAM

LOAD BALANCER NE KREIRAM JER ZAHTEVA ADDITIONAL CONFIGURATION

POSTO CE NODE PORT IMATI JEDINI EFEKAT NA MOJ CLUSTER, TRENUTNO, ZATO NJEGA SADA KRIRAM

# KREIRACU CONFIG FILE

- `touch infra/k8s/posts-srv.yaml`

```yaml

```

GORNJI SELECTOR USRTVARI GOVORI TO DA SE POD-OVI, KOJI SU TAGGED SA `posts`, KOJI IMAJU TO U IMAENU USTVARI EXPOSE-UJU; KORISTIO SAM ISTU SINTAKSU I RANIJE KADA SAM VEZAO PODS ZA DEPLOYMENT, ISTO SAM REKAO DA PODS KOJI IMAJU `posts` USTVARI PRIPADAJU TOM DEPLOYMENT-U, USTVARI NAREDIO SAM DA TAKVE PODS KREIRA, POMENUTI DEPLOYMENT

TAD SAM TAMO KORISTIO I label KOJI SE VAO POSTS (MOZES SAM VIDETI `cat infra/k8s/posts-depl.yaml`)

E UPRAVO JA SADA VEZUJEM SERVICE ZA POD-S KOJI IMAJU LABEL `posts`

I TAKO CILJAM DA TRAFFIC TIH PODS BUDE EXPOSED TO THE OUTSIDE WORLD

DOBRO, JA GOVORIM POFDS U MNOZINI, MEDJUTIM JA IMAM SAMO JEDAN POD, KAKO SAM I RANIJE REKAO

O SVEMU OVOME SA LABELS I SELECTORS, MOGU RAZMISLJATI KAO O CLASS NAMES SISTEMU IZ HTML-A

KAKO VIDIS GORE SAM PODESIO I `ports`

ZNAM DA MOJ APP SLUSA NA PORTU 4000 (`cat posts/index.js`)
**I JA SM SAM POSEBNO MORAO DA EXPOSE-UJEM TAJ PORT**

ALI KAO STO VIDIS PODESIO SAM ARRAY OF ENTRIES ZA port

MALO TI MOZE BITI CONFUSING I `port` I `targetPort`

TARGET STVAR GOVORI DA ZELIS DA OPEN-UJE TRAFFIC PORTA 4000 TO THE OUTSIDE WORLD

MEDJUTIM STVARI SU NESTO VISE CONFUSING

NODE JE VIRTUAL MACHINE, U KOJEM SU ODREDJENI PODS, ILI SVI OBJEKTI CLUSTER-A

POD IMA CONTAINER SA APLIKACIJOM KOJA U MOM SLUCAJU LISTEN-UJE ON PORT 4000, I MI NA TO REFFER-UJEMO KAO NA `targetPort`

**ALI TI KREIRAS NODE PORT SERVICE, I TO CE BITI PORT TOG SERVICE-A, DAKLE POTPUNO DRUGI PORT, PORT DRUGE VIRTUAL MACHINE-E, I REFER-UJEMO NA TO KA ONA `port`**

I TO JE TAJ port U CONFIG FILE-U

A TAJ PORT SERVICE-A CE DA REDIRECT-UJE TRAFFIC DO TARGET PORT-A

**ZATO `port` I `targetPort` NE MORAJU DA BUDU ISTI, JER SE RADI O POTPUNO RAZLLICITIM PORT-OVIMA, I MOZE IM SE ZADATI POTPUNO RAZLICIT BROJ**

AUTOR WORKSHOPA NE MOZE NESTO ON TOP OF HIS HEAD DA SE SETI, KADA BI TI BAS MORAO DA STAVLJAS RAZLICIT BROJ, AL ITAKAV SLUCAJ SIGURNO POSTOJI U PRKASI

ALI U MOM PRIMERU JA CU IMATI ISTE BROJEVE ZA TA DVA PORT-A

ISTO TAKO `name` PORTA MOZE BITI STA GOD HOCES, JA SAM STAVIO posts
