# REQUEST MINIMIZATION STRATEGIES

IN YOUR CURRENT PROJECT

YOU HAVE POSTS

ON THEM YOU HAVE COMMENTS

YOU HAVE **1 NETWOR REQUEST FOR LIST OF POSTS ,EHRN POST LIST COMPONENT MOUNTS**

***

PROBLEM: **EVERY POST HAS THEIR OWN NETWORK REQUEST FOR COMMENTS**; **THAT MEANS IF YOU HAVE 20 POSTS, THAT IS 20 NEW NETWORK REQUEST FOR COMMENTS, ON MOUNTING OFCOURSE**

INCREDIBLE INEFFICIENCY

***

I WANT TO FIGURE OUT HOW COULD EVERYTHING BE MORE EFFICIENT

I WOULD LIKE CONDENSE EVERYTING INTO ONE REQUEST

# POSIBLE SOLUTION 1: MONOLIT WAY

SOMEHOW EMBEDING COMMENTS INSIDE A POST WHEN YOU FETCH FOR POSTS

BUT THAT IS MONOLIT WAY I DON'T WANT TO USE

I WANT TO USE MICROSERVICES

# POSIBLE SOLUTION 1: SYNC COMMUNICATION

MONOLIT WAY WHERE YOU ADD `?comments=true` QUERY STRING (WHEN YOU FETCH FOR POSTS)

THAT MEANS YOUR POST SERVICE WOULD COMUNICATE WITH YOUR COMMENTS SERVICE TO FETCH COMMENTS

AND IN RESPONSE TO FRONTEND YOU WOULD GET POSTS WITH COMMENTS

SO YOU WOULD NEED TO ADD CODE TO POST SERVICE TO REACH OUT FOR COMMENTS

THIS IS BAD BECAUSE YOU HAVE DEPENDANCY BETWEEN SERVICES AND MANY MORE THINGS ARE BAD, YOU CAN CHECK THOSE CONS LISTED WHEN WE TALK ABOUT SYNC MICROSERVICES COMMUNICATION

# EXEPTABLE SOLUTION: ASYNC COMUNICTION

THIS SOLUTION ENVOLVES `EVENT BROKER` OR `EVENT BUS`

HE RECEIVES NOTIFICATIONS FROM ANY SERVICE, AND ROUTES THEM TO ALL SERVICES THAT WE ARE RUNNING

**WE WILL INTRODUCE NEW SERVICE, CALLED QUERY SERVICE**

HIS GOAL IS TO ASSEMBLE ALL POSTS AND RELATED COMMENTS

**QUERY SERVICE WOULD GET NOTIFIED WHEN POST OR COMMENT ARE CREATED, BY THE EVENT BUSS; BECAUSE EVENT BUS HIMSLEF WILL RECEIVE NOTIFICATIONS FROM POST SERVICE AND COMMENT SERVICE**

EVERYTHING WILL BE ASSEMBLED TO EFFICIENT DATA STRUCTURE

AT THE END YOU WILL REDUCE EVERYTHING TO ONE SINGLE REQUEST

## YOU NEED TO CREATE DATA STRUCTURE THAT STORES EVENT SENT BY EVENT BUS TO QUERY SERVICE

QUERY SERVICE DIDN'T SEND ANY EVENTS (THAT IS IMPORTATN, WE ARE STILL TALKING OF OTHER SERVICES EMMITING EVENTS)

IF YOU CREATE POST, EVENTUALLY EVENT BUS WOULD BRING POST ID (HIS TITLE ALSO) TO THE QUERY SERVICE, WHERE WE PLACE THAT CREATED POST TO DATA STRUCTURE, THAT STORES DOCUMENT IN FORMAT: POST ID, POST TITLE, AND EMPTY COMMENTS ARRAY

WHEN IS CREATED, COMMENT, NEW EVENT WOULD HAPPENED, THAN EVENT BUS WOULD EVENTUUALLY SEND TO QUERY SERVICE WHIT EVERYTHING NECESSARY (INCLUDING RELATED POST ID)

THAN COMMENT DATA WOULD BE ADDED TO COMMENTS ARRAY OF RELATED POST IN METIONE DATA STRUCTURE

## NOW IT'S TIME TO EMIT EVENT TO THE QUERY SERVICE

NOW I IS EASY, ALL DATA FROM QUERY SERVICES DATA STRUCTURE WOULD BE SENT TO THE CLIENT (BROWSER)
