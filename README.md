# STORING EVENTS WHEN THEY HIT EVENT BUS

IF OUR SERVICE ISN'T WORKING FOR A LONG TIME WE KNOW THAT WITH MICROSERVICES INFRASTRUCTURE, ONE CRACHED SERVICE WON'T CRACH ENTIRE APP

BUT WHEN SERVICE IS DOWN FOR SOME TIME (SHORT OR LONG), WE SHOUD HAVE MECHANISM FOR HIM TO GET ALL THE EVENTS THAT WERE HAPPENING WHEN HE WAS DOWN

# LETS SAY YOUR MODERATION SERVICE GOES DOWN

ALL OF YOUR RENDERED POST WOULD BE IN "pending" STATE

YOU CAN TRY THAT BY STARTING EVERY SERVICE, MAKIING FEW POST AND COMMENTS; AND YOU'LL SEE THAT COMMENTS ARE PENDING

**SO WHAT WOULD HAPPEN NOW IF YOU START MODERATION SERVICE**

NOTHING, COMMENTS THAT WERE MADE WHEN MODERATION WAS DOWN ARE STILL PENDING, AND NEW CCOMMENTS YOU CAN ADD NOW, WOULD BE MODERATED (REJECTED OR APPROVED) BECAUSE SERVICE IS UP

HOW TO MODIFY OUR CODE TO FIX THIS SITUATION

# WE STORE EVENTS, WHICH WE CAN DO INSIDE EVENT BUS PART OF APPLICATION; AND WE NEED TO GET THOSE EVENTS WHEN SERVICE STARTS

WE WILL STORE EVENTS INSIDE EVENTS ARRAY INSIDE EVENT BUS SERVICE

NORMALLY I WOULDN'T DO THAT IN MEMORY, I WOULD DO THAT INSIDE DATABASE, BUT THIS IS EDUCATIONAL EXAMPLE AND WE ARE DOING THINGS IN MEMORY

- `code event_bus/index.js`

```js

```

# BIG DOWNSIDE IS THAT YOUR EVENTS DATA STORE CAN GROW OVER TIME

BUT STORAGE IS CHEAP; AND MAYBE IN SOME REAL EXAMPLE YOU COUD IMPLEMENT SOME EVENTS DATA STORE CLEANUP FUNCTION

AND YOU HAVE ALREADY EVENT BUSES SOLUTIONS, OR OPENSOURCE SOLUTIONS OUTTHERE (MANY PACKAGES) WHERE BESIDES ALL EVENT BUS AUTOMATION, THERE WOULD BE SOME WAY OF STORING AND ERASING EVENTS
